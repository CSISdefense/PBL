data = PBLscore,
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="Obligation.2016", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ AddressCat  )#,
png(
paste( paste("Output\\DoD"
,"PBLscore"
,"PBLaddressable"
,"Bar"
,sep="_"
)
,".png"
, sep=""
)
, type="cairo"
, width=7.5
, height=4
, units='in'
, pointsize=12
, res=300
)
# debug(LatticePercentLineWrapper)
#
# PBLgraph<-LatticePlotWrapper(
#     "Official PBL Status"
#     ,""
#     ,"PBL Addressable Market Heuristic Score"
#     ,"Percentage of Obligations Towards PBL Contracts\nFor Contracts with Corresponding Heuristic Scores"
#     ,Coloration
#     ,PBLscore2012
#     ,NA
#     ,"JointScore"
#     ,"pObligationJ"
#     ,"MaxOfIsOfficialPBL"
#     ,"JointScore"
# #     ,"USDATL"
# #     ,"StartDate"
# #     ,"EndDate"
#     )
PBLscore2012<-subset(PBLscore,Fiscal.Year>=as.Date("2011-10-01"))
PBLscore2012<-ddply(PBLscore2012, .(JointScore), transform, pObligationJ=Obligation.2016/sum(Obligation.2016))
PBLgraph<-LatticePlotWrapper(
""
,""
,"PBL Addressable Market Heuristic Score"
,"Percentage of Obligations Towards PBL Contracts\nFor Contracts with Corresponding Heuristic Scores"
,Coloration
,subset(PBLscore2012,MaxOfIsPerformanceBasedLogistics=="All PBL")
,5
,"MaxOfIsOfficialPBL"
,"pObligationJ"
,"MaxOfIsOfficialPBL"
,"JointScore"
#     ,"USDATL"
#     ,"StartDate"
#     ,"EndDate"
)
debug(LatticePlotWrapper)
PBLgraph<-LatticePlotWrapper(
""
,""
,"PBL Addressable Market Heuristic Score"
,"Percentage of Obligations Towards PBL Contracts\nFor Contracts with Corresponding Heuristic Scores"
,Coloration
,subset(PBLscore2012,MaxOfIsPerformanceBasedLogistics=="All PBL")
,5
,"MaxOfIsOfficialPBL"
,"pObligationJ"
,"MaxOfIsOfficialPBL"
,"JointScore"
#     ,"USDATL"
#     ,"StartDate"
#     ,"EndDate"
)
PBLgraph<-LatticePlotWrapper(
""
,""
,"PBL Addressable Market Heuristic Score"
,"Percentage of Obligations Towards PBL Contracts\nFor Contracts with Corresponding Heuristic Scores"
,Coloration
,subset(PBLscore2012,MaxOfIsPerformanceBasedLogistics=="All PBL")
,5
,"MaxOfIsOfficialPBL"
,"pObligationJ"
,"MaxOfIsOfficialPBL"
,"JointScore"
#     ,"USDATL"
#     ,"StartDate"
#     ,"EndDate"
)
source('~/Development/R-scripts-and-data/helper.r')
source('~/Development/R-scripts-and-data/helper.r')
source('~/Development/R-scripts-and-data/helper.r')
source('~/Development/R-scripts-and-data/helper.r')
PBLgraph<-LatticePlotWrapper(
""
,""
,"PBL Addressable Market Heuristic Score"
,"Percentage of Obligations Towards PBL Contracts\nFor Contracts with Corresponding Heuristic Scores"
,Coloration
,subset(PBLscore2012,MaxOfIsPerformanceBasedLogistics=="All PBL")
,5
,"MaxOfIsOfficialPBL"
,"pObligationJ"
,"MaxOfIsOfficialPBL"
,"JointScore"
#     ,"USDATL"
#     ,"StartDate"
#     ,"EndDate"
)
source('~/Development/R-scripts-and-data/helper.r')
PBLgraph<-LatticePlotWrapper(
""
,""
,"PBL Addressable Market Heuristic Score"
,"Percentage of Obligations Towards PBL Contracts\nFor Contracts with Corresponding Heuristic Scores"
,Coloration
,subset(PBLscore2012,MaxOfIsPerformanceBasedLogistics=="All PBL")
,5
,"MaxOfIsOfficialPBL"
,"pObligationJ"
,"MaxOfIsOfficialPBL"
,"JointScore"
#     ,"USDATL"
#     ,"StartDate"
#     ,"EndDate"
)
source('~/Development/R-scripts-and-data/helper.r')
PBLgraph<-LatticePlotWrapper(
""
,""
,"PBL Addressable Market Heuristic Score"
,"Percentage of Obligations Towards PBL Contracts\nFor Contracts with Corresponding Heuristic Scores"
,Coloration
,subset(PBLscore2012,MaxOfIsPerformanceBasedLogistics=="All PBL")
,5
,"MaxOfIsOfficialPBL"
,"pObligationJ"
,"MaxOfIsOfficialPBL"
,"JointScore"
#     ,"USDATL"
#     ,"StartDate"
#     ,"EndDate"
)
debug(LatticePlotWrapper)
PBLgraph<-LatticePlotWrapper(
""
,""
,"PBL Addressable Market Heuristic Score"
,"Percentage of Obligations Towards PBL Contracts\nFor Contracts with Corresponding Heuristic Scores"
,Coloration
,subset(PBLscore2012,MaxOfIsPerformanceBasedLogistics=="All PBL")
,5
,"MaxOfIsOfficialPBL"
,"pObligationJ"
,"MaxOfIsOfficialPBL"
,"JointScore"
#     ,"USDATL"
#     ,"StartDate"
#     ,"EndDate"
)
rint.figure+scale_fill_manual(
VAR.color.legend.label
,  values=c(labels.category.DF$RGB)
, limits=c(labels.category.DF$variable)
, labels=c(labels.category.DF$Label)
)
print.figure+scale_fill_manual(
VAR.color.legend.label
,  values=c(labels.category.DF$RGB)
, limits=c(labels.category.DF$variable)
, labels=c(labels.category.DF$Label)
)
PBLgraph
PBLgraph<-LatticePlotWrapper(
""
,""
,"PBL Addressable Market Heuristic Score"
,"Percentage of Obligations Towards PBL Contracts\nFor Contracts with Corresponding Heuristic Scores"
,Coloration
,subset(PBLscore2012,MaxOfIsPerformanceBasedLogistics=="All PBL")
,5
,"MaxOfIsOfficialPBL"
,"pObligationJ"
,"MaxOfIsOfficialPBL"
,"JointScore"
#     ,"USDATL"
#     ,"StartDate"
#     ,"EndDate"
)
source('~/Development/R-scripts-and-data/helper.r')
PBLscore  <- read.csv(
paste("Data\\Contract_SP_ContractPBLscoreSubCustomerProdServ.txt", sep = ""),
header = TRUE, sep = "\t", dec = ".", strip.white = TRUE,
na.strings = c("NULL","NA",""),
stringsAsFactors = TRUE
)
PBLscore  <- read.csv(
paste("Data\\Contract_SP_ContractPBLscoreSubCustomerProdServ.txt", sep = ""),
header = TRUE, sep = "\t", dec = ".", strip.white = TRUE,
na.strings = c("NULL","NA",""),
stringsAsFactors = TRUE
)
PBLscore<-apply_lookups(Path,PBLscore)
PBLscore[,1]
max(PBLscore[,1])
PBLscore<-apply_lookups(Path,PBLscore)
max(PBLscore[,1])
names(PBLscore)
str(PBLscore)
Coloration<-read.csv(
paste("https://raw.githubusercontent.com/CSISdefense/Lookup-Tables/master/data/style/",
"Lookup_Coloration.csv",sep=""),
header=TRUE, sep=",", na.strings="", dec=".", strip.white=TRUE,
stringsAsFactors=FALSE
)
# debug(LatticePercentLineWrapper)
PBLscore$Graph<-TRUE
PBLscore$SubCustomer.component<-factor(PBLscore$SubCustomer.component,
levels=c("Army","Navy","Air Force","DLA",
"MDA","MilitaryHealth","Additional DoD Components"),
labels=c("Army","Navy","Air Force","DLA",
"MDA","Military\nHealth","Additional\nDoD\nComponents"),
ordered=TRUE)
PBLscore$SubCustomer.component<-droplevels(PBLscore$SubCustomer.component)
PBLscore$SubCustomer.detail<-factor(PBLscore$SubCustomer.detail,
levels=c("Army","Navy","Air Force","DLA",
"Other DoD"),
labels=c("Army","Navy","Air Force","DLA",
"Other DoD"),
ordered=TRUE)
PBLscore$SubCustomer.detail<-droplevels(PBLscore$SubCustomer.detail)
PBLscore$MaxOfIsPerformanceBasedLogistics<-factor(PBLscore$MaxOfIsPerformanceBasedLogistics,
levels=c(0
,1
),
labels=c("Not PBL"
,"All PBL"
),
ordered=TRUE)
PBLscore$MaxOfIsPerformanceBasedLogistics[is.na(PBLscore$MaxOfIsPerformanceBasedLogistics)]<-"Not PBL"
PBLscore$MaxOfIsOfficialPBL<-factor(PBLscore$MaxOfIsOfficialPBL,
exclude=NULL,
levels=c(1,
0,
NA
),
labels=c("Official PBL"
,"Other"
,"Not PBL"
),
ordered=TRUE)
PBLscore$MaxOfIsOfficialPBL[is.na(PBLscore$MaxOfIsOfficialPBL)]<-"Not PBL"
#
# PBLscorePSC  <- read.csv(
#     paste("Data\\Contract_SP_ContractPBLscoreSubCustomerProdServ.txt", sep = ""),
#     header = TRUE, sep = "\t", dec = ".", strip.white = TRUE,
#     na.strings = c("NULL","NA",""),
#     stringsAsFactors = TRUE
#     )
#
# PBLscorePSC<-apply_lookups(Path,PBLscorePSC)
# names(PBLscorePSC)
#
# PBLscorePSC$Graph<-TRUE
#
#
# PBLscorePSC$SubCustomer.component<-droplevels(PBLscorePSC$SubCustomer.component)
# PBLscorePSC$SubCustomer.component<-factor(PBLscorePSC$SubCustomer.component,
#                                                levels=c("Army","Navy","Air Force","DLA",
#                                                         "MDA","MilitaryHealth","Additional DoD Components"),
#                                                labels=c("Army","Navy","Air Force","DLA",
#                                                         "MDA","Military\nHealth","Additional\nDoD\nComponents"),
#                                                ordered=TRUE)
#
#
# PBLscorePSC$SubCustomer.detail<-droplevels(PBLscorePSC$SubCustomer.detail)
# PBLscorePSC$SubCustomer.detail<-factor(PBLscorePSC$SubCustomer.detail,
#                                                levels=c("Army","Navy","Air Force","DLA",
#                                                         "Other DoD"),
#                                                labels=c("Army","Navy","Air Force","DLA",
#                                                         "Other DoD"),
#                                                ordered=TRUE)
#
#
#
# PBLscorePSC$MaxOfIsPerformanceBasedLogistics<-factor(PBLscorePSC$MaxOfIsPerformanceBasedLogistics,
#                                         levels=c(0
#                                                  ,1
#                                                  ),
#                                         labels=c("Not PBL"
#                                                  ,"All PBL"
#                                                  ),
#                                         ordered=TRUE)
#
# PBLscorePSC$MaxOfIsPerformanceBasedLogistics[is.na(PBLscorePSC$MaxOfIsPerformanceBasedLogistics)]<-"Not PBL"
#
#
# PBLscorePSC$MaxOfIsOfficialPBL<-factor(PBLscorePSC$MaxOfIsOfficialPBL,
#                                     exclude=NULL,
#                                         levels=c(1,
#                                                  0,
#                                                  NA
#                                                  ),
#                                         labels=c("Official PBL"
#                                                  ,"Other"
#                                                  ,"Not PBL"
#                                                  ),
#                                         ordered=TRUE)
#
# PBLscorePSC$MaxOfIsOfficialPBL[is.na(PBLscorePSC$MaxOfIsOfficialPBL)]<-"Not PBL"
#
#
# DLAPBLscorePSC<-PBLscorePSC[PBLscorePSC$SubCustomer=="DLA",]
#
#
#
#   VAR.long.DF<-ddply(VAR.long.DF, .("Fiscal.Year","Customer","ProductOrServiceArea","ProductOrServiceCode" ,"ProductOrServiceCodeText"   ), transform, p=y.variable/sum(y.variable))
PBLscore$MaxOfPSCscore[is.na(PBLscore$MaxOfPSCscore)]<-0
PBLscore$LengthSingleScore<-PBLscore$LengthScore+PBLscore$MaxOfIsSingleAward
PBLscore$LengthSingleScore[PBLscore$LengthSingleScore==3]<-2
max(PBLscore$Fiscal.Year)
PBLscore<-ddply(PBLscore, .(MaxOfIsOnlyOneSource), transform, pObligation=Obligation.2016/sum(Obligation.2016))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligation", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( MaxOfIsOnlyOneSource  ~ .)#,
#scales = "free_y",
# space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="Obligation.2016", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( MaxOfIsOnlyOneSource  ~ .)#,
#scales = "free_y",
# space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
PBLscore<-ddply(PBLscore, .(MaxOfPSCscore), transform, pObligation=Obligation.2016/sum(Obligation.2016))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligation", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ MaxOfPSCscore  )#,
#scales = "free_y",
# space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="Obligation.2016", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( MaxOfPSCscore  ~ .)#,
#                 #scales = "free_y",
#                # space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
#
PBLscore<-ddply(PBLscore, .(MaxOfIsSingleAward), transform, pObligation=Obligation.2016/sum(Obligation.2016))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligation", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ MaxOfIsSingleAward  )#,
#scales = "free_y",
# space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="Obligation.2016", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ MaxOfIsSingleAward  )#,
#                 #scales = "free_y",
#                # space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
#
PBLscore<-ddply(PBLscore, .(PricingScore), transform, pObligation=Obligation.2016/sum(Obligation.2016))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligation", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ PricingScore  )#,
#scales = "free_y",
# space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="Obligation.2016", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ PricingScore  )#,
#                 #scales = "free_y",
#                # space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
#
PBLscore<-ddply(PBLscore, .(LengthScore), transform, pObligation=Obligation.2016/sum(Obligation.2016))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligation", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( LengthScore  ~ .)#,
#scales = "free_y",
# space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="Obligation.2016", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( LengthScore  ~ .)#,
#                 #scales = "free_y",
#                # space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
#
PBLscore<-ddply(PBLscore, .(LengthScore,MaxOfIsSingleAward), transform, pObligationLS=Obligation.2016/sum(Obligation.2016))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligationLS", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( LengthScore  ~ MaxOfIsSingleAward)#,
#scales = "free_y",
# space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
PBLscore$LengthSingleScore<-PBLscore$LengthScore+PBLscore$MaxOfIsSingleAward
PBLscore<-ddply(PBLscore, .(LengthSingleScore), transform, pObligationLS=Obligation.2016/sum(Obligation.2016))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligation", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( LengthSingleScore  ~ .)#,
#scales = "free_y",
# space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
PBLscore<-ddply(PBLscore, .(LengthSingleScore), transform, pObligationLS=Obligation.2016/sum(Obligation.2016))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligationLS", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ LengthSingleScore )#,
#scales = "free_y",
# space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
PBLscore$LengthSingleScore<-PBLscore$LengthScore+PBLscore$MaxOfIsSingleAward
PBLscore$LengthSingleScore[PBLscore$LengthSingleScore==3]<-2
PBLscore$MaxOfPSCscore[is.na(PBLscore$MaxOfPSCscore)]<-0
PBLscore$JointScore<-PBLscore$LengthSingleScore+PBLscore$PricingScore+PBLscore$MaxOfPSCscore+PBLscore$MaxOfIsOnlyOneSource*2
PBLscore$JointScore[is.na(PBLscore$JointScore)|PBLscore$JointScore<0]<-0
PBLscore$AddressCat<- cut2(PBLscore$JointScore,cuts=c(4,6,9))
PBLscore$AddressCat<-factor(PBLscore$AddressCat,
#                                     exclude=NULL,
levels=c("[ 0, 4)",
"[ 4, 6)",
"[ 6, 9)",
"[ 9,10]"
),
labels=c("No history [0-3]"
,"Outer edge [4-5]"
,"Uncommon [6-8]"
,"Promising [9-10]"
),
ordered=TRUE)
PBLscore$MaxOfIsOfficialPBL[is.na(PBLscore$MaxOfIsOfficialPBL)]<-"Not PBL"
# ggplot(#"MaxOfIsOfficialPBL"
#   data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
#   aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligationJ", fill="MaxOfIsOfficialPBL"),
#   ) + geom_bar()#binwidth=1 +
#     facet_grid( . ~ JointScore)
# #                 scales = "free_y",
# #                 space = "free_y")+ scale_y_continuous(expand = c(0.1,0.01)) #+scale_x_continuous(limits=c(0,10))
PBLscore<-ddply(PBLscore, .(AddressCat), transform, pObligationA=Obligation.2016/sum(Obligation.2016))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="pObligationA", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ AddressCat)
#                 scales = "free_y",
#                 space = "free_y")+ scale_y_continuous(expand = c(0.1,0.01)) #+scale_x_continuous(limits=c(0,10))
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="Obligation.2016", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ JointScore  )#,
#                 #scales = "free_y",
#                # space = "free_y") #+ scale_y_continuous(expand = c(0,50)) +scale_x_continuous(limits=c(0,10))
#
ggplot(#"MaxOfIsOfficialPBL"
data = subset(PBLscore,MaxOfIsPerformanceBasedLogistics=="All PBL" & Fiscal.Year>=as.Date("2011-10-01")),
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="Obligation.2016", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ AddressCat  )#,
ggplot(#"MaxOfIsOfficialPBL"
data = PBLscore,
aes_string(x = "MaxOfIsPerformanceBasedLogistics", weight="Obligation.2016", fill="MaxOfIsOfficialPBL"),
) + geom_bar()#binwidth=1 +
facet_grid( . ~ AddressCat  )#,
png(
paste( paste("Output\\DoD_components"
,"PBL_addressable"
,"Percent"
,"Annual"
,sep="_"
)
,".png"
, sep=""
)
, type="cairo"
, width=7.5
, height=5
, units='in'
, pointsize=12
, res=150
)
PBLgraph<-LatticePercentLineWrapper(
"Addressable PBL category"
,""
,"Fiscal Year"
,"% of Component Obligations"
,Coloration
,PBLscore
,NA
,"Fiscal.Year"
,"Obligation.2016"
,"AddressCat"
,"SubCustomer.detail"
#     ,"USDATL"
#     ,"StartDate"
#     ,"EndDate"
)
